---
title: "Blog"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,message=FALSE,warning=FALSE)
library(ggplot2)
library(DT)
```

This blog is my contribution to the fields of data science, business analytics, information technology, and variations on those themes.

```{r blog_df, echo=FALSE}

# instead I need to read all .rmd files in main dir
  # and exclude non-blog posts!
blog_df <- data.frame(
  filename = c("create_interesting_datasets"
               ,"ifelse_NA_trap"
               ,"building_this_site")
)

blog_df$created_at <- as.Date(file.info(paste0(blog_df$filename,".html"))$ctime)
blog_df$updated_at <- as.Date(file.info(paste0(blog_df$filename,".html"))$mtime)
blog_df$size <- file.info(paste0(blog_df$filename,".Rmd"))$size
blog_df$lines <- sapply(
  paste0(blog_df$filename,".Rmd"),function(x) blog_df$filename = length(readLines(x)))


#wrap filename in raw html
blog_df$filename <- paste0("<a href='",blog_df$filename,".html' target='_blank'>",blog_df$filename,"</a>")

# knitr::kable(blog_df)

# define formate for header
col_format <- JS(
  "function(settings, json) {",
  "$(this.api().table().header()).css({'background-color': '#252525', 'color': '#FFFFFF'});",
  "}")

datatable(blog_df
          ,escape = FALSE
          ,rownames=FALSE
          ,colnames = c('Blog Post Name',
                       'Created At',
                       'Updated At',
                       'Post Size (bytes)',
                       'Post Length (lines)')
          ,options=list(
            initComplete = col_format,
            pageLength=25,
            columnDefs = list(list(className = 'dt-center',targets=2:ncol(blog_df)-1)), #center all but first column
            dom = 'frtpB'
          )) %>%
      formatStyle(
        'size',
        background = styleColorBar(range(0,max(blog_df$size)), 'orange'),
        backgroundSize = '98% 75%',
        backgroundRepeat = 'no-repeat',
        backgroundPosition = 'left') %>%
        formatStyle(
        'lines',
        background = styleColorBar(range(0,max(blog_df$lines)), 'orange'),
        backgroundSize = '98% 75%',
        backgroundRepeat = 'no-repeat',
        backgroundPosition = 'left') %>%
      formatStyle(columns = "filename", 
              # backgroundColor = 'gray',
              color = 'black',
              fontWeight = 'bold')

# Some blog post ideas
# 
# * Plot geometries on maps
# * Tool to choose the cost effective pizza
# * How to Kaggle: Huge disclaimer, this is my first competition
# * Encouraging steps toward graduation: Proof of concept
# * ifelse trap with NA values
# * print rmarkdown from html without latex

```




