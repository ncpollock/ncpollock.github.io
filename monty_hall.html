<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Noah Pollock" />


<title>Language Wars One: Monty Hall</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-122098274-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-122098274-2');
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #303030; color: #cccccc; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #cccccc; background-color: #303030; }
code > span.kw { color: #f0dfaf; } /* Keyword */
code > span.dt { color: #dfdfbf; } /* DataType */
code > span.dv { color: #dcdccc; } /* DecVal */
code > span.bn { color: #dca3a3; } /* BaseN */
code > span.fl { color: #c0bed1; } /* Float */
code > span.ch { color: #dca3a3; } /* Char */
code > span.st { color: #cc9393; } /* String */
code > span.co { color: #7f9f7f; } /* Comment */
code > span.ot { color: #efef8f; } /* Other */
code > span.al { color: #ffcfaf; } /* Alert */
code > span.fu { color: #efef8f; } /* Function */
code > span.er { color: #c3bf9f; } /* Error */
code > span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
code > span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code > span.sc { color: #dca3a3; } /* SpecialChar */
code > span.vs { color: #cc9393; } /* VerbatimString */
code > span.ss { color: #cc9393; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { color: #f0dfaf; } /* ControlFlow */
code > span.op { color: #f0efd0; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #7f9f7f; } /* Documentation */
code > span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code > span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code > span.in { color: #7f9f7f; font-weight: bold; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="my_style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Noah C. Pollock</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="about_me.html">
    <span class="fa fa-info-circle"></span>
     
    About Me
  </a>
</li>
<li>
  <a href="blog.html">
    <span class="fa fa-street-view"></span>
     
    Blog
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Dashboards
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Static</li>
    <li>
      <a href="flex_dash.html">R Markdown</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Dynamic</li>
    <li>
      <a href="shiny_bi.html">BI with Shiny</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="resources.html">
    <span class="fa fa-key"></span>
     
    Resources
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/noah-pollock-5b5804157/">
    <span class="fa fa-linkedin"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/ncpollock/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Language Wars One: Monty Hall</h1>
<h4 class="author"><em>Noah Pollock</em></h4>
<h4 class="date"><em>December 5, 2018</em></h4>

</div>


<div id="scope" class="section level2">
<h2>Scope</h2>
<p>Use Python and R separately to solve the same problem.</p>
</div>
<div id="introduction-and-prerequisites" class="section level2">
<h2>Introduction and Prerequisites</h2>
<p>This is the first post in a series of posts that will pit R against Python. I hope that this series will eventually add fuel to the fire of the language wars. Of course, In reality, I understand that there’s no one language to rule them all. Specific use-cases, personal tastes, and performance differences wax and wane within and between languages, but the R vs Python debate is a lot of fun to ignite.</p>
<p>For this first post, we will compare the two languages on how they handle simulating the classic Monty Hall problem. In case you’re unfamiliar with the problem, you are given the choice between three doors and behind one of them is a prize. One of the doors you didn’t pick is opened and you are asked whether you would like to keep your selection or choose the other unopened door. Does it matter whether your switch or stay? What is the probability that the prize is behind your door vs the other door?</p>
<p><strong>Disclaimer:</strong> I hardly know Python, in fact, we just recently became acquainted. So, I’ll rely almost exclusively on other people’s Python solution(s) to a problem. I’ll then try to do better, or at least as good, in R. Naturally, my python selections may reflect poorly written Python, but surely it’s better than me writing the Python myself?</p>
<div class="panel-body">
<div class="col-md-6">
<h2 id="python-solution">Python Solution</h2>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="im">import</span> numpy <span class="im">as</span> np
<span class="im">import</span> timeit, functools
simulations <span class="op">=</span> <span class="dv">10000</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="kw">def</span> simulate_prizedoor(nsim):
    <span class="co">#compute here</span>
    answer <span class="op">=</span> np.random.randint(<span class="dv">3</span>,size<span class="op">=</span>nsim)
    <span class="cf">return</span> answer
<span class="kw">def</span> simulate_guess(nsim):
    <span class="co">#compute here</span>
    guess <span class="op">=</span> np.random.randint(<span class="dv">3</span>,size<span class="op">=</span>nsim)
    <span class="cf">return</span> guess
    
<span class="kw">def</span> goat_door(prizedoors,guesses):
    nsims <span class="op">=</span> <span class="bu">len</span>(prizedoors)
    goat <span class="op">=</span> np.zeros(nsims, dtype<span class="op">=</span>np.<span class="bu">int</span>)
    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(nsims):
        possible_goats <span class="op">=</span> [d <span class="cf">for</span> d <span class="kw">in</span> [<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>] <span class="cf">if</span> prizedoors[i] <span class="op">!=</span> d <span class="kw">and</span> guesses[i] <span class="op">!=</span> d]
        goat[i] <span class="op">=</span> np.random.choice(possible_goats)
    <span class="cf">return</span> goat
<span class="kw">def</span> switch_guess(guesses, goatdoors):
  
    nsims <span class="op">=</span> <span class="bu">len</span>(guesses)
    choice <span class="op">=</span> np.zeros(nsims, dtype<span class="op">=</span>np.<span class="bu">int</span>)
    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(nsims):
        choice[i] <span class="op">=</span> <span class="dv">3</span> <span class="op">-</span> (guesses[i] <span class="op">+</span> goatdoors[i])
    
    <span class="cf">return</span> choice
<span class="co">#your code here</span>
<span class="kw">def</span> win_percentage(guesses, prizedoors):
    nsim <span class="op">=</span> <span class="bu">len</span>(prizedoors)
    nwin <span class="op">=</span> <span class="dv">0</span>
    
    <span class="co"># Pythonic way</span>
    nwin <span class="op">=</span> <span class="bu">sum</span>(guesses <span class="op">==</span> prizedoors)
            
    <span class="cf">return</span> <span class="fl">100.0</span> <span class="op">*</span> (nwin<span class="op">/</span>nsim)
<span class="kw">def</span> switch_vs_stay(nsim):
    
    prizes <span class="op">=</span> simulate_prizedoor(nsim)
    guesses <span class="op">=</span> simulate_guess(nsim)
    goats <span class="op">=</span> goat_door(prizes, guesses)    
    switch_choice <span class="op">=</span> switch_guess(guesses,goats)
    
    winpct_switch <span class="op">=</span> win_percentage(switch_choice, prizes)
    winpct_stay <span class="op">=</span> win_percentage(guesses, prizes)
    
    <span class="cf">return</span> [winpct_switch, winpct_stay]
    
results <span class="op">=</span> switch_vs_stay(simulations)
<span class="bu">print</span>(results)</code></pre></div>
<pre><code>## [67.61, 32.39]</code></pre>
<h2 id="inspect-python-functions">Inspect Python Functions</h2>
<p>See below whether the output is as expected from select functions.</p>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python">prizes <span class="op">=</span> simulate_prizedoor(<span class="dv">10</span>)
guesses <span class="op">=</span> simulate_guess(<span class="dv">10</span>)
goats <span class="op">=</span> goat_door(prizes,guesses)
switch <span class="op">=</span> switch_guess(prizes,goats)
<span class="bu">print</span> (<span class="st">&quot;prizes  = &quot;</span>, prizes)</code></pre></div>
<pre><code>## prizes  =  [1 1 2 2 1 2 2 1 0 2]</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> (<span class="st">&quot;guesses = &quot;</span>, guesses)</code></pre></div>
<pre><code>## guesses =  [0 2 2 1 2 2 1 2 1 2]</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> (<span class="st">&quot;goats  = &quot;</span>, goats)</code></pre></div>
<pre><code>## goats  =  [2 0 1 0 0 1 0 0 2 1]</code></pre>
<div class="sourceCode"><pre class="sourceCode python"><code class="sourceCode python"><span class="bu">print</span> (<span class="st">&quot;switch  = &quot;</span>, switch)</code></pre></div>
<pre><code>## switch  =  [0 2 0 1 2 0 1 2 1 0]</code></pre>
</div>
<div class="col-md-6">
<h2 id="r-solution">R Solution</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">simulations &lt;-<span class="st"> </span><span class="dv">10000</span>

sim_prizedoor &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">nsim =</span> <span class="dv">3</span>) <span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,<span class="dt">size =</span> nsim,<span class="dt">replace =</span> <span class="ot">TRUE</span>)
sim_guess &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">nsim =</span> <span class="dv">3</span>) <span class="kw">sim_prizedoor</span>(nsim)
bad_door &lt;-<span class="st"> </span><span class="cf">function</span>(prize,guess){
  <span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(prize),<span class="cf">function</span>(i) {
    <span class="kw">sample</span>(
      <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)[<span class="op">!</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(prize[i],guess[i]))],<span class="dv">2</span>) <span class="co"># because 1:x when length(x) = 1</span>
      ,<span class="dv">1</span>)
  })
}

switch_guess &lt;-<span class="st"> </span><span class="cf">function</span>(guess,bad_door){
  <span class="kw">sapply</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(guess),<span class="cf">function</span>(i) {
    <span class="kw">sample</span>(
      <span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)[<span class="op">!</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(guess[i],bad_door[i]))],<span class="dv">2</span>) <span class="co"># because 1:x when length(x) = 1</span>
      ,<span class="dv">1</span>)
  })
}

win_pct &lt;-<span class="st"> </span><span class="cf">function</span>(guess, prize_door){
    nsim =<span class="st"> </span><span class="kw">length</span>(prize_door)
    <span class="co"># Pythonic way works in R too!</span>
    nwin =<span class="st"> </span><span class="kw">sum</span>(guess <span class="op">==</span><span class="st"> </span>prize_door)
    <span class="dv">100</span> <span class="op">*</span><span class="st"> </span>(nwin<span class="op">/</span>nsim)
}

switch_vs_stay &lt;-<span class="st"> </span><span class="cf">function</span>(nsim){
    
    prizes =<span class="st"> </span><span class="kw">sim_prizedoor</span>(nsim)
    guesses =<span class="st"> </span><span class="kw">sim_guess</span>(nsim)
    losers =<span class="st"> </span><span class="kw">bad_door</span>(prizes, guesses)    
    switch_choice =<span class="st"> </span><span class="kw">switch_guess</span>(guesses,losers)
    
    winpct_switch =<span class="st"> </span><span class="kw">win_pct</span>(switch_choice, prizes)
    winpct_stay =<span class="st"> </span><span class="kw">win_pct</span>(guesses, prizes)
    
    <span class="kw">c</span>(winpct_switch, winpct_stay)
}
results =<span class="st"> </span><span class="kw">switch_vs_stay</span>(simulations)
results</code></pre></div>
<pre><code>## [1] 66.04 33.96</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(<span class="kw">switch_vs_stay</span>(simulations))</code></pre></div>
<pre><code>##    user  system elapsed 
##    0.17    0.00    0.17</code></pre>
<h2 id="inspect-r-functions">Inspect R Functions</h2>
<p>See below whether the output is as expected from select functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">prizes =<span class="st"> </span><span class="kw">sim_prizedoor</span>(<span class="dv">10</span>)
guesses =<span class="st"> </span><span class="kw">sim_guess</span>(<span class="dv">10</span>)
goats =<span class="st"> </span><span class="kw">bad_door</span>(prizes,guesses)
<span class="cf">switch</span> =<span class="st"> </span><span class="kw">switch_guess</span>(guesses,goats)
<span class="kw">paste0</span> (<span class="st">&quot;prizes  = &quot;</span>, <span class="kw">paste0</span>(prizes,<span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;prizes  = 1 1 2 3 3 3 3 3 3 2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span> (<span class="st">&quot;guesses = &quot;</span>, <span class="kw">paste0</span>(guesses,<span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;guesses = 1 2 3 3 3 3 3 1 1 1&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span> (<span class="st">&quot;goats  = &quot;</span>, <span class="kw">paste0</span>(goats,<span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;goats  = 2 3 1 1 1 2 1 2 2 3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste0</span> (<span class="st">&quot;switch = &quot;</span>, <span class="kw">paste0</span>(<span class="cf">switch</span>,<span class="dt">collapse =</span> <span class="st">&quot; &quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;switch = 3 1 2 2 2 1 2 3 3 2&quot;</code></pre>
</div>
</div>
</div>

  </div> <!-- articleBandContent -->
</div> <!-- pageContent -->
</div> <!-- floating toc -->
</div>

<footer id="site-footer">
  <div class="col-md-4">
  
<div class="polaroid rotate_right">
  <img src="images/wife_and_i.jpg" alt="My wifte and I." width="115" >
  <p class="caption">My wife and I at a friend's wedding.</p>
</div>

<div class="polaroid rotate_left">
  <img src="images/dogs.jpg" alt="Our dogs Bambi and Lexi" width="115">
  <p class="caption">Our furry children, Bambi and Lexi.</p>
</div>
  </div>
    <div class="col-md-4">
      Connect with me: <br>
      <a href="https://www.linkedin.com/in/noah-pollock-5b5804157/">
        <i class="fa fa-linkedin-square fa-lg"></i> Linkedin 
      </a>
      <br>
      <a href="https://github.com/ncpollock/">
        <i class="fa fa-github-square fa-lg"></i> GitHub 
      </a>
  </div>
    <div class="col-md-4">
      <a href="https://www.google.com/" target="_blank">
        <i class="fa fa-question-circle fa-lg"></i> Help 
      </a>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
